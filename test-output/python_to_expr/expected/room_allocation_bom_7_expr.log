Module [optimistic_examples.room_allocation.room_allocation_bom_7] - Expression: 
Math-Module(ALIAS Area AS Integer; ALIAS Floor AS String; ALIAS EmployeeType AS String; ALIAS OfficeType AS String; ALIAS EmployeeId AS String; DATA-CLASS @dataclass(unsafe_hash=True*Boolean*) OfficeTypeInfo:  max_occupancy: Integer; type_name: @*python-builtins*.optimistic_examples.room_allocation.room_allocation_bom_7.OfficeType (Primary key); cost: Number; DATA-CLASS @dataclass(unsafe_hash=True*Boolean*, frozen=True*Boolean*) OfficeAvailability:  floor: @*python-builtins*.optimistic_examples.room_allocation.room_allocation_bom_7.Floor (Primary key); office_type: @*python-builtins*.optimistic_examples.room_allocation.room_allocation_bom_7.OfficeType (Primary key); rooms: Integer; DATA-CLASS @dataclass(unsafe_hash=True*Boolean*, frozen=True*Boolean*) Employee($Resource):  type: @*python-builtins*.optimistic_examples.room_allocation.room_allocation_bom_7.EmployeeType; number: @*python-builtins*.optimistic_examples.room_allocation.room_allocation_bom_7.EmployeeId (Primary key); team_lead: @*python-builtins*.optimistic_examples.room_allocation.room_allocation_bom_7.EmployeeId; is_team_lead: Boolean; is_independent: Boolean; area: @*python-builtins*.optimistic_examples.room_allocation.room_allocation_bom_7.Area; DATA-CLASS @dataclass(unsafe_hash=True*Boolean*, frozen=True*Boolean*) FloorAssignment($Assignment):  resource: @*python-builtins*.optimistic_examples.room_allocation.room_allocation_bom_7.EmployeeId; activity: @*python-builtins*.optimistic_examples.room_allocation.room_allocation_bom_7.Floor; DATA-CLASS @dataclass(unsafe_hash=True*Boolean*, frozen=True*Boolean*) OfficeTypeByEmployeeType:  employee_type: @*python-builtins*.optimistic_examples.room_allocation.room_allocation_bom_7.EmployeeType (Primary key); office_type: @*python-builtins*.optimistic_examples.room_allocation.room_allocation_bom_7.OfficeType; DATA-CLASS @dataclass(unsafe_hash=True*Boolean*, frozen=True*Boolean*) RoomAllocationProblem6($OptimizationProblem, $UniqueAssignment): DOC="
    Optimization problem of allocating employees to offices
    " solution: Set[@*python-builtins*.optimistic_examples.room_allocation.room_allocation_bom_7.FloorAssignment]; employees: Collection[@*python-builtins*.optimistic_examples.room_allocation.room_allocation_bom_7.Employee]; building: Collection[@*python-builtins*.optimistic_examples.room_allocation.room_allocation_bom_7.OfficeAvailability]; office_type_by_employee_type_table: Collection[@*python-builtins*.optimistic_examples.room_allocation.room_allocation_bom_7.OfficeTypeByEmployeeType]; office_info: Collection[@*python-builtins*.optimistic_examples.room_allocation.room_allocation_bom_7.OfficeTypeInfo]; DEFINE @$memoize self.all_floors(): Any = SET floor($a) FOR a IN building($self); DEFINE @$memoize self.all_areas(): Any = SET area($e) FOR e IN employees($self); DEFINE @$memoize self.all_employees(): Any = SET number($e) FOR e IN employees($self); DEFINE @$memoize self.all_office_types(): Any = SET office_type($ofc) FOR ofc IN office_type_by_employee_type_table($self); DEFINE @$constraint self.legal_assignment(): Any = ∀a ∈ solution($self). (resource($a) ∈ $self.all_employees() ∧ activity($a) ∈ $self.all_floors()); DEFINE @$constraint self.constraint2(): Any = BODY DOC="
        Each employee must be assigned to the same floor as his/her team lead unless the team lead is independent
        " VALUE="∀e1 ∈ employees($self) S.T. ¬is_independent($self.get_employee(team_lead($e1))). $self.unique_assignment(number($e1)) = $self.unique_assignment(team_lead($e1))"; DEFINE self.office_type_by_employee_type(t_emp:Any): Any = next(STREAM(office_type($entry) FOR entry IN office_type_by_employee_type_table($self) S.T. employee_type($entry) = $t_emp)); DEFINE @$memoize self.get_employee(number:Any): Any = next(STREAM($m FOR m IN employees($self) S.T. number($m) = $number)); DEFINE self.occupancy(f1:@*python-builtins*.optimistic_examples.room_allocation.room_allocation_bom_7.Floor, o1:Any): Any = BODY DOC="
        How many employees who need to be in offices of type o1 are placed on floor f1
        " VALUE="count(STREAM($e1 FOR e1 IN employees($self) S.T. $self.office_type_by_employee_type(type($e1)) = $o1 ∧ $self.unique_assignment(number($e1)) = $f1))"; DEFINE self.get_office_availability(f1:Any, o1:Any): Any = next(STREAM(rooms($a) FOR a IN building($self) S.T. floor($a) = $f1 ∧ office_type($a) = $o1)); DEFINE @$constraint self.constraint3(): Any = ∀o1 ∈ $self.all_office_types() FOR f1 IN $self.all_floors(). $self.occupancy($f1, $o1) ≤ max_occupancy($self.get_office_info($o1)) * $self.get_office_availability($f1, $o1); DEFINE self.area_utilization(area:@*python-builtins*.optimistic_examples.room_allocation.room_allocation_bom_7.Area, f1:@*python-builtins*.optimistic_examples.room_allocation.room_allocation_bom_7.Floor): Any = count(STREAM($e1 FOR e1 IN employees($self) S.T. is_team_lead($e1) ∧ area($e1) = $area ∧ $self.unique_assignment(number($e1)) = $f1)); DEFINE self.cost_penalty(area:@*python-builtins*.optimistic_examples.room_allocation.room_allocation_bom_7.Area, f1:@*python-builtins*.optimistic_examples.room_allocation.room_allocation_bom_7.Floor): Any = $self.area_utilization($area, $f1) = 0 ? 0.0 : 1.0; DEFINE self.get_office_info(ot:@*python-builtins*.optimistic_examples.room_allocation.room_allocation_bom_7.OfficeType): Any = next(STREAM($oti FOR oti IN office_info($self) S.T. type_name($oti) = $ot)); DEFINE self.assigned_offices(o1:@*python-builtins*.optimistic_examples.room_allocation.room_allocation_bom_7.OfficeType, f1:@*python-builtins*.optimistic_examples.room_allocation.room_allocation_bom_7.Floor): Integer = ceil($self.occupancy($f1, $o1) / max_occupancy($self.get_office_info($o1))); DEFINE self.total_cost(): Number = Σ $self.assigned_offices($o1, $f1) * cost($self.get_office_info($o1)) FOR o1 IN $self.all_office_types() FOR f1 IN $self.all_floors(); DEFINE @minimize(weight=20000) self.objective1(): Any = BODY DOC="
        Minimize penalties of spreading areas over multiple floors
        " VALUE="Σ $self.cost_penalty($a1, $f1) FOR a1 IN $self.all_areas() FOR f1 IN $self.all_floors()"; DEFINE @$minimize self.objective2(): Any = $self.total_cost())


Module [optimistic_examples.room_allocation.resource_allocation_bom_2] - Expression: 
Math-Module(ALIAS ResourceType AS String; ALIAS Activity AS String; DATA-CLASS @dataclass(frozen=True*Boolean*) Resource:  type: @*python-builtins*.optimistic_examples.room_allocation.resource_allocation_bom_2.ResourceType; DATA-CLASS @dataclass(frozen=True*Boolean*) Assignment:  resource: @*python-builtins*.optimistic_examples.room_allocation.resource_allocation_bom_2.Resource; activity: @*python-builtins*.optimistic_examples.room_allocation.resource_allocation_bom_2.Activity)


